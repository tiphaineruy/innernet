var B=Object.defineProperty,q=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var v=(n,t,r)=>t in n?B(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,h=(n,t)=>{for(var r in t||(t={}))y.call(t,r)&&v(n,r,t[r]);if(m)for(var r of m(t))x.call(t,r)&&v(n,r,t[r]);return n},b=(n,t)=>q(n,H(t));var S=(n,t)=>{var r={};for(var s in n)y.call(n,s)&&t.indexOf(s)<0&&(r[s]=n[s]);if(n!=null&&m)for(var s of m(n))t.indexOf(s)<0&&x.call(n,s)&&(r[s]=n[s]);return r};var k=(n,t,r)=>(v(n,typeof t!="symbol"?t+"":t,r),r);import{u as J,j as e,F as w,B as C,a as K,b as i,c as N,C as I,I as E,S as U,d as g,M as V,e as Y,m as G,f as Q,h as W,g as X,s as $,r as d,i as Z,k as P,A as R,l as A,n as _,o as M,p as F,q as L,t as O,R as T,v as ee,w as te,x as ne,y as re,z as oe}from"./vendor.54e78282.js";const se=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}};se();var j="/ui/assets/favicon.edfcff9c.svg";function z(){const{colorMode:n,toggleColorMode:t}=J();return e(w,{children:e(C,{bg:K("gray.100","gray.900"),px:4,children:i(N,{h:16,alignItems:"center",justifyContent:"space-between",children:[e(I,{bg:"white",size:"30px",children:e(E,{borderRadius:"full",boxSize:"20px",src:j,alt:"Dan Abramov"})}),e(N,{alignItems:"center",children:e(U,{direction:"row",spacing:7,children:e(g,{onClick:t,children:n==="light"?e(V,{}):e(Y,{})})})})]})})})}class ie{constructor(){k(this,"config",{token:"",endpoint:""});G(this),Q(this,{name:"configStore",properties:["config"],storage:window.localStorage})}setToken(t){this.config.token=t}setEndpoint(t){this.config.endpoint=t}async hydrateStore(){await W(this)}async clearPersistedData(){await X(this)}disposePersist(){$(this)}}const c=new ie,ae=()=>{const n=d.exports.useRef();return d.exports.useEffect(()=>(console.log("INIT:",c.config.endpoint),n.current=Z.create({baseURL:c.config.endpoint,headers:{"X-Innernet-Server-Key":`${c.config.token}`}}),()=>{n.current=void 0}),[c.config]),n};var ce=()=>{const n=P(),t=ae(),[r,s]=d.exports.useState([]),[o,a]=d.exports.useState(),[l,p]=d.exports.useState([]),f=()=>{!!t.current&&t.current.get("/v1/admin/peers").then(u=>{s(u.data),p(h({peers:null},l))},u=>{p(h({peers:u},l))})},D=()=>{!!t.current&&t.current.get("/v1/user/state").then(u=>{a(u.data),p(h({state:null},l))},u=>{p(h({state:u},l))})};return i("div",{children:[e(z,{}),e("div",{className:"p-10 w-full",children:i("div",{className:"p-4 bg-gray-100 w-full rounded-lg text-black",children:[e(g,{colorScheme:"blue",className:"float-right",onClick:()=>{c.clearPersistedData().then(()=>{c.setEndpoint(""),c.setToken(""),n.push("/auth")})},children:"Clear"}),i("p",{children:[e("span",{className:"text-blue-500 underline decoration-yellow-400",children:"Endpoint: "}),"  ",c.config.endpoint]}),i("p",{className:"truncate w-40",children:[e("span",{className:"text-blue-500 underline decoration-yellow-400",children:"Token:"}),"  ",c.config.token]})]})}),i("div",{className:"p-10 w-full flex flex-col gap-4",children:[e("div",{children:e(g,{colorScheme:"blue",w:150,onClick:D,children:"USER API"})}),l.state&&i(R,{status:"error",children:[e(A,{}),"Error Loading State /v1/user/state"]}),o&&e("div",{className:"h-52 overflow-auto",children:e("pre",{children:o?JSON.stringify(o,null,4):""})}),e("div",{children:e(g,{colorScheme:"blue",w:150,onClick:f,children:"ADMIN API"})}),l.peers&&i(R,{status:"error",children:[e(A,{}),"Error Loading peers /v1/admin/peers"]}),r&&e("div",{className:"h-52 overflow-auto",children:e("pre",{children:r.length>1?JSON.stringify(r,null,4):""})})]})]})};const le=()=>{const n=P(),[t,r]=d.exports.useState(window.location.origin),[s,o]=d.exports.useState("");return d.exports.useEffect(()=>{c.hydrateStore().then(()=>{c.config.token!==""&&n.push("/server")})}),i(w,{children:[e(z,{}),i(_,{maxW:"container.lg",centerContent:!0,children:[i("div",{className:"flex gap-2 p-10 content-center w-screen items-center justify-center h-30",children:[e("p",{className:"inline-block align-middle  text-blue-500 underline decoration-yellow-400 decoration-2 text-4xl font-semibold",children:"innernet"}),e(I,{bg:"white",size:"40px",className:"align-middle",children:e(E,{borderRadius:"full",boxSize:"30px",src:j,alt:"Dan Abramov"})})]}),i("form",{onSubmit:()=>{c.setEndpoint(t),c.setToken(s),n.push("/server")},children:[i(C,{p:4,children:[i(M,{id:"server-key",isRequired:!0,children:[e(F,{children:"Innernert Server key"}),e(L,{placeholder:"ex: 0jYksHFHyQGkznbVhFuRAOiycy7o...",value:s,onChange:f=>o(f.target.value)}),e(O,{children:"[server] public-key, found in /etc/innernet/inteface.conf on your peer"})]}),i(M,{id:"server-endpoint",isRequired:!0,className:"pt-6",children:[e(F,{children:"Server Endpoint"}),e(L,{value:t,onChange:f=>r(f.target.value)}),e(O,{children:"You shouldnt need to change this"})]})]}),e("div",{className:"pt-6 float-right",children:e(g,{type:"submit",children:"Authenticate"})})]})]})]})};function de(r){var s=r,{component:n}=s,t=S(s,["component"]);return e(T,b(h({},t),{render:o=>e(n,h({},o))}))}const ue=()=>i(ee,{basename:"/ui",children:[e(te,{exact:!0,from:"/",to:"/auth"}),e(de,{path:"/server",component:ce}),e(T,{path:"/auth",component:le})]});ne.render(e(re.StrictMode,{children:e(oe,{children:e(ue,{})})}),document.getElementById("root"));
